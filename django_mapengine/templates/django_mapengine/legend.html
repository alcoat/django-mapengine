<button id="mapengine-legend-open-btn" class="hidden" aria-label="Open map legend">
  <!-- Heroicons -->
  <svg xmlns="http://www.w3.org/2000/svg"
       fill="none"
       viewBox="0 0 24 24"
       stroke-width="1.5"
       stroke="currentColor"
       height="24"
       width="24">
    <path stroke-linecap="round" stroke-linejoin="round" d="M6.429 9.75 2.25 12l4.179 2.25m0-4.5 5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0 4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0-5.571 3-5.571-3" />
  </svg>
</button>
<!-- 2) the legend panel itself -->
<div id="mapengine-legend">
  <div class="mapengine-legend-content">
    <!-- first category -->
    <div class="mapengine-legend-category">
      <div class="mapengine-legend-header">
        <h2>Erneuerbare Energien</h2>
        <button id="mapengine-legend-close-btn" aria-label="Close map legend">
          <!-- Heroicons -->
          <svg xmlns="http://www.w3.org/2000/svg"
               fill="none"
               viewBox="0 0 24 24"
               stroke-width="1.5"
               stroke="currentColor"
               height="24"
               width="24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="mapengine-legend-items">
        <!-- example item -->
        <div class="mapengine-legend-item">
          <div class="item-left">
            <span class="mapengine-legend-circle" style="background:#3b82f6"></span>
            <span class="mapengine-legend-item-label">Windenergie (in Betrieb)</span>
          </div>
          <div class="mapengine-legend-item-right">
            <div class="mapengine-legend-tooltip-container">
              <!-- Heroicons -->
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="mapengine-legend-info-icon"
                   fill="none"
                   viewBox="0 0 24 24"
                   stroke-width="1.5"
                   stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
              </svg>
              <div class="mapengine-legend-tooltip">Dein Tooltip-Text hier</div>
            </div>
            <label class="mapengine-legend-switch">
              <input type="checkbox" class="mapengine-legend-switch-input mapengine-layer" data-layer-name="fauna_flora_habitat"/>
              <div class="mapengine-legend-switch-track"></div>
              <div class="mapengine-legend-switch-thumb"></div>
            </label>
          </div>
        </div>
        <!-- … repeat .legend-item for each layer … -->
      </div>
    </div>
    <!-- second category (e.g. Batteriespeicher) -->
    <div class="mapengine-legend-category">
      <div class="mapengine-legend-header">
        <h2>Speicher</h2>
        <!-- no close-btn here -->
      </div>
      <div class="mapengine-legend-items">
        <div class="mapengine-legend-item">
          <div class="mapengine-legend-item-left">
            <span class="mapengine-legend-square" style="background:#7c3aed"></span>
            <span class="mapengine-legend-item-label">Batteriespeicher</span>
          </div>
          <div class="mapengine-legend-item-right">
            <div class="mapengine-legend-tooltip-container">
              <!-- Heroicons -->
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="info-icon"
                   fill="none"
                   viewBox="0 0 24 24"
                   stroke-width="1.5"
                   stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
              </svg>
              <div class="mapengine-legend-tooltip">Dein Tooltip-Text hier</div>
            </div>
            <label class="mapengine-legend-switch">
              <input type="checkbox" class="mapengine-legend-switch-input" />
              <div class="mapengine-legend-switch-track"></div>
              <div class="mapengine-legend-switch-thumb"></div>
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
